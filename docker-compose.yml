# mini-gen-search/docker-compose.yml (MODIFIED)
version: "3.8"

services:
  # UPDATED SERVICE NAME
  frontend-search:
    build:
      # UPDATED CONTEXT DIRECTORY
      context: ./frontend-service-search
      dockerfile: Dockerfile
    # UPDATED CONTAINER NAME
    container_name: mini-gen-frontend-search
    ports:
      - "8080:5000"
    environment:
      # UPDATED HOST REFERENCE
      - TEXTGEN_HOST=http://textgen-rag:5001
    depends_on:
      # UPDATED DEPENDENCY NAME
      - textgen-rag
    networks:
      - mini-net

  # UPDATED SERVICE NAME
  textgen-rag:
    build:
      # UPDATED CONTEXT DIRECTORY
      context: ./textgen-service-rag
      dockerfile: Dockerfile
    # UPDATED CONTAINER NAME
    container_name: mini-gen-textgen-rag
    env_file:
      - .env
    expose:
      - "5001"
    networks:
      - mini-net

networks:
  mini-net:
    driver: bridge